{"version":3,"names":["module","exports","state","list","sortMethod","isNamedList","Array","isArray","initState","index","keyedList","Object","keys","jobs","results","size","length","sort","a","b"],"sources":["state.js"],"sourcesContent":["// API\nmodule.exports = state;\n\n/**\n * Creates initial state object\n * for iteration over list\n *\n * @param   {array|object} list - list to iterate over\n * @param   {function|null} sortMethod - function to use for keys sort,\n *                                     or `null` to keep them as is\n * @returns {object} - initial state object\n */\nfunction state(list, sortMethod)\n{\n  var isNamedList = !Array.isArray(list)\n    , initState =\n    {\n      index    : 0,\n      keyedList: isNamedList || sortMethod ? Object.keys(list) : null,\n      jobs     : {},\n      results  : isNamedList ? {} : [],\n      size     : isNamedList ? Object.keys(list).length : list.length\n    }\n    ;\n\n  if (sortMethod)\n  {\n    // sort array keys based on it's values\n    // sort object's keys just on own merit\n    initState.keyedList.sort(isNamedList ? sortMethod : function(a, b)\n    {\n      return sortMethod(list[a], list[b]);\n    });\n  }\n\n  return initState;\n}\n"],"mappings":"AACAA,MAAM,CAACC,OAAP,GAAiBC,KAAjB;;AAWA,SAASA,KAAT,CAAeC,IAAf,EAAqBC,UAArB,EACA;EACE,IAAIC,WAAW,GAAG,CAACC,KAAK,CAACC,OAAN,CAAcJ,IAAd,CAAnB;EAAA,IACIK,SAAS,GACX;IACEC,KAAK,EAAM,CADb;IAEEC,SAAS,EAAEL,WAAW,IAAID,UAAf,GAA4BO,MAAM,CAACC,IAAP,CAAYT,IAAZ,CAA5B,GAAgD,IAF7D;IAGEU,IAAI,EAAO,EAHb;IAIEC,OAAO,EAAIT,WAAW,GAAG,EAAH,GAAQ,EAJhC;IAKEU,IAAI,EAAOV,WAAW,GAAGM,MAAM,CAACC,IAAP,CAAYT,IAAZ,EAAkBa,MAArB,GAA8Bb,IAAI,CAACa;EAL3D,CAFF;;EAWA,IAAIZ,UAAJ,EACA;IAGEI,SAAS,CAACE,SAAV,CAAoBO,IAApB,CAAyBZ,WAAW,GAAGD,UAAH,GAAgB,UAASc,CAAT,EAAYC,CAAZ,EACpD;MACE,OAAOf,UAAU,CAACD,IAAI,CAACe,CAAD,CAAL,EAAUf,IAAI,CAACgB,CAAD,CAAd,CAAjB;IACD,CAHD;EAID;;EAED,OAAOX,SAAP;AACD"}