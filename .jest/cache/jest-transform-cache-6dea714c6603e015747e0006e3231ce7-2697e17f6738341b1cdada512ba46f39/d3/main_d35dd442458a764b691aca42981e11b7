b2502cfeddf1b1e7502329756323df3b
var fs = require('fs');

var path = require('path');

var os = require('os');

function log(message) {
  console.log("[dotenv][DEBUG] " + message);
}

var NEWLINE = '\n';
var RE_INI_KEY_VAL = /^\s*([\w.-]+)\s*=\s*(.*)?\s*$/;
var RE_NEWLINES = /\\n/g;
var NEWLINES_MATCH = /\r\n|\n|\r/;

function parse(src, options) {
  var debug = Boolean(options && options.debug);
  var obj = {};
  src.toString().split(NEWLINES_MATCH).forEach(function (line, idx) {
    var keyValueArr = line.match(RE_INI_KEY_VAL);

    if (keyValueArr != null) {
      var key = keyValueArr[1];
      var val = keyValueArr[2] || '';
      var end = val.length - 1;
      var isDoubleQuoted = val[0] === '"' && val[end] === '"';
      var isSingleQuoted = val[0] === "'" && val[end] === "'";

      if (isSingleQuoted || isDoubleQuoted) {
        val = val.substring(1, end);

        if (isDoubleQuoted) {
          val = val.replace(RE_NEWLINES, NEWLINE);
        }
      } else {
        val = val.trim();
      }

      obj[key] = val;
    } else if (debug) {
      log("did not match key and value when parsing line " + (idx + 1) + ": " + line);
    }
  });
  return obj;
}

function resolveHome(envPath) {
  return envPath[0] === '~' ? path.join(os.homedir(), envPath.slice(1)) : envPath;
}

function config(options) {
  var dotenvPath = path.resolve(process.cwd(), '.env');
  var encoding = 'utf8';
  var debug = false;

  if (options) {
    if (options.path != null) {
      dotenvPath = resolveHome(options.path);
    }

    if (options.encoding != null) {
      encoding = options.encoding;
    }

    if (options.debug != null) {
      debug = true;
    }
  }

  try {
    var parsed = parse(fs.readFileSync(dotenvPath, {
      encoding: encoding
    }), {
      debug: debug
    });
    Object.keys(parsed).forEach(function (key) {
      if (!Object.prototype.hasOwnProperty.call(process.env, key)) {
        process.env[key] = parsed[key];
      } else if (debug) {
        log("\"" + key + "\" is already defined in `process.env` and will not be overwritten");
      }
    });
    return {
      parsed: parsed
    };
  } catch (e) {
    return {
      error: e
    };
  }
}

module.exports.config = config;
module.exports.parse = parse;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJwYXRoIiwib3MiLCJsb2ciLCJtZXNzYWdlIiwiY29uc29sZSIsIk5FV0xJTkUiLCJSRV9JTklfS0VZX1ZBTCIsIlJFX05FV0xJTkVTIiwiTkVXTElORVNfTUFUQ0giLCJwYXJzZSIsInNyYyIsIm9wdGlvbnMiLCJkZWJ1ZyIsIkJvb2xlYW4iLCJvYmoiLCJ0b1N0cmluZyIsInNwbGl0IiwiZm9yRWFjaCIsImxpbmUiLCJpZHgiLCJrZXlWYWx1ZUFyciIsIm1hdGNoIiwia2V5IiwidmFsIiwiZW5kIiwibGVuZ3RoIiwiaXNEb3VibGVRdW90ZWQiLCJpc1NpbmdsZVF1b3RlZCIsInN1YnN0cmluZyIsInJlcGxhY2UiLCJ0cmltIiwicmVzb2x2ZUhvbWUiLCJlbnZQYXRoIiwiam9pbiIsImhvbWVkaXIiLCJzbGljZSIsImNvbmZpZyIsImRvdGVudlBhdGgiLCJyZXNvbHZlIiwicHJvY2VzcyIsImN3ZCIsImVuY29kaW5nIiwicGFyc2VkIiwicmVhZEZpbGVTeW5jIiwiT2JqZWN0Iiwia2V5cyIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImVudiIsImUiLCJlcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJtYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG4vKjo6XG5cbnR5cGUgRG90ZW52UGFyc2VPcHRpb25zID0ge1xuICBkZWJ1Zz86IGJvb2xlYW5cbn1cblxuLy8ga2V5cyBhbmQgdmFsdWVzIGZyb20gc3JjXG50eXBlIERvdGVudlBhcnNlT3V0cHV0ID0geyBbc3RyaW5nXTogc3RyaW5nIH1cblxudHlwZSBEb3RlbnZDb25maWdPcHRpb25zID0ge1xuICBwYXRoPzogc3RyaW5nLCAvLyBwYXRoIHRvIC5lbnYgZmlsZVxuICBlbmNvZGluZz86IHN0cmluZywgLy8gZW5jb2Rpbmcgb2YgLmVudiBmaWxlXG4gIGRlYnVnPzogc3RyaW5nIC8vIHR1cm4gb24gbG9nZ2luZyBmb3IgZGVidWdnaW5nIHB1cnBvc2VzXG59XG5cbnR5cGUgRG90ZW52Q29uZmlnT3V0cHV0ID0ge1xuICBwYXJzZWQ/OiBEb3RlbnZQYXJzZU91dHB1dCxcbiAgZXJyb3I/OiBFcnJvclxufVxuXG4qL1xuXG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJylcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJylcbmNvbnN0IG9zID0gcmVxdWlyZSgnb3MnKVxuXG5mdW5jdGlvbiBsb2cgKG1lc3NhZ2UgLyo6IHN0cmluZyAqLykge1xuICBjb25zb2xlLmxvZyhgW2RvdGVudl1bREVCVUddICR7bWVzc2FnZX1gKVxufVxuXG5jb25zdCBORVdMSU5FID0gJ1xcbidcbmNvbnN0IFJFX0lOSV9LRVlfVkFMID0gL15cXHMqKFtcXHcuLV0rKVxccyo9XFxzKiguKik/XFxzKiQvXG5jb25zdCBSRV9ORVdMSU5FUyA9IC9cXFxcbi9nXG5jb25zdCBORVdMSU5FU19NQVRDSCA9IC9cXHJcXG58XFxufFxcci9cblxuLy8gUGFyc2VzIHNyYyBpbnRvIGFuIE9iamVjdFxuZnVuY3Rpb24gcGFyc2UgKHNyYyAvKjogc3RyaW5nIHwgQnVmZmVyICovLCBvcHRpb25zIC8qOiA/RG90ZW52UGFyc2VPcHRpb25zICovKSAvKjogRG90ZW52UGFyc2VPdXRwdXQgKi8ge1xuICBjb25zdCBkZWJ1ZyA9IEJvb2xlYW4ob3B0aW9ucyAmJiBvcHRpb25zLmRlYnVnKVxuICBjb25zdCBvYmogPSB7fVxuXG4gIC8vIGNvbnZlcnQgQnVmZmVycyBiZWZvcmUgc3BsaXR0aW5nIGludG8gbGluZXMgYW5kIHByb2Nlc3NpbmdcbiAgc3JjLnRvU3RyaW5nKCkuc3BsaXQoTkVXTElORVNfTUFUQ0gpLmZvckVhY2goZnVuY3Rpb24gKGxpbmUsIGlkeCkge1xuICAgIC8vIG1hdGNoaW5nIFwiS0VZJyBhbmQgJ1ZBTCcgaW4gJ0tFWT1WQUwnXG4gICAgY29uc3Qga2V5VmFsdWVBcnIgPSBsaW5lLm1hdGNoKFJFX0lOSV9LRVlfVkFMKVxuICAgIC8vIG1hdGNoZWQ/XG4gICAgaWYgKGtleVZhbHVlQXJyICE9IG51bGwpIHtcbiAgICAgIGNvbnN0IGtleSA9IGtleVZhbHVlQXJyWzFdXG4gICAgICAvLyBkZWZhdWx0IHVuZGVmaW5lZCBvciBtaXNzaW5nIHZhbHVlcyB0byBlbXB0eSBzdHJpbmdcbiAgICAgIGxldCB2YWwgPSAoa2V5VmFsdWVBcnJbMl0gfHwgJycpXG4gICAgICBjb25zdCBlbmQgPSB2YWwubGVuZ3RoIC0gMVxuICAgICAgY29uc3QgaXNEb3VibGVRdW90ZWQgPSB2YWxbMF0gPT09ICdcIicgJiYgdmFsW2VuZF0gPT09ICdcIidcbiAgICAgIGNvbnN0IGlzU2luZ2xlUXVvdGVkID0gdmFsWzBdID09PSBcIidcIiAmJiB2YWxbZW5kXSA9PT0gXCInXCJcblxuICAgICAgLy8gaWYgc2luZ2xlIG9yIGRvdWJsZSBxdW90ZWQsIHJlbW92ZSBxdW90ZXNcbiAgICAgIGlmIChpc1NpbmdsZVF1b3RlZCB8fCBpc0RvdWJsZVF1b3RlZCkge1xuICAgICAgICB2YWwgPSB2YWwuc3Vic3RyaW5nKDEsIGVuZClcblxuICAgICAgICAvLyBpZiBkb3VibGUgcXVvdGVkLCBleHBhbmQgbmV3bGluZXNcbiAgICAgICAgaWYgKGlzRG91YmxlUXVvdGVkKSB7XG4gICAgICAgICAgdmFsID0gdmFsLnJlcGxhY2UoUkVfTkVXTElORVMsIE5FV0xJTkUpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHJlbW92ZSBzdXJyb3VuZGluZyB3aGl0ZXNwYWNlXG4gICAgICAgIHZhbCA9IHZhbC50cmltKClcbiAgICAgIH1cblxuICAgICAgb2JqW2tleV0gPSB2YWxcbiAgICB9IGVsc2UgaWYgKGRlYnVnKSB7XG4gICAgICBsb2coYGRpZCBub3QgbWF0Y2gga2V5IGFuZCB2YWx1ZSB3aGVuIHBhcnNpbmcgbGluZSAke2lkeCArIDF9OiAke2xpbmV9YClcbiAgICB9XG4gIH0pXG5cbiAgcmV0dXJuIG9ialxufVxuXG5mdW5jdGlvbiByZXNvbHZlSG9tZSAoZW52UGF0aCkge1xuICByZXR1cm4gZW52UGF0aFswXSA9PT0gJ34nID8gcGF0aC5qb2luKG9zLmhvbWVkaXIoKSwgZW52UGF0aC5zbGljZSgxKSkgOiBlbnZQYXRoXG59XG5cbi8vIFBvcHVsYXRlcyBwcm9jZXNzLmVudiBmcm9tIC5lbnYgZmlsZVxuZnVuY3Rpb24gY29uZmlnIChvcHRpb25zIC8qOiA/RG90ZW52Q29uZmlnT3B0aW9ucyAqLykgLyo6IERvdGVudkNvbmZpZ091dHB1dCAqLyB7XG4gIGxldCBkb3RlbnZQYXRoID0gcGF0aC5yZXNvbHZlKHByb2Nlc3MuY3dkKCksICcuZW52JylcbiAgbGV0IGVuY29kaW5nIC8qOiBzdHJpbmcgKi8gPSAndXRmOCdcbiAgbGV0IGRlYnVnID0gZmFsc2VcblxuICBpZiAob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLnBhdGggIT0gbnVsbCkge1xuICAgICAgZG90ZW52UGF0aCA9IHJlc29sdmVIb21lKG9wdGlvbnMucGF0aClcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuZW5jb2RpbmcgIT0gbnVsbCkge1xuICAgICAgZW5jb2RpbmcgPSBvcHRpb25zLmVuY29kaW5nXG4gICAgfVxuICAgIGlmIChvcHRpb25zLmRlYnVnICE9IG51bGwpIHtcbiAgICAgIGRlYnVnID0gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gc3BlY2lmeWluZyBhbiBlbmNvZGluZyByZXR1cm5zIGEgc3RyaW5nIGluc3RlYWQgb2YgYSBidWZmZXJcbiAgICBjb25zdCBwYXJzZWQgPSBwYXJzZShmcy5yZWFkRmlsZVN5bmMoZG90ZW52UGF0aCwgeyBlbmNvZGluZyB9KSwgeyBkZWJ1ZyB9KVxuXG4gICAgT2JqZWN0LmtleXMocGFyc2VkKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb2Nlc3MuZW52LCBrZXkpKSB7XG4gICAgICAgIHByb2Nlc3MuZW52W2tleV0gPSBwYXJzZWRba2V5XVxuICAgICAgfSBlbHNlIGlmIChkZWJ1Zykge1xuICAgICAgICBsb2coYFwiJHtrZXl9XCIgaXMgYWxyZWFkeSBkZWZpbmVkIGluIFxcYHByb2Nlc3MuZW52XFxgIGFuZCB3aWxsIG5vdCBiZSBvdmVyd3JpdHRlbmApXG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldHVybiB7IHBhcnNlZCB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4geyBlcnJvcjogZSB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMuY29uZmlnID0gY29uZmlnXG5tb2R1bGUuZXhwb3J0cy5wYXJzZSA9IHBhcnNlXG4iXSwibWFwcGluZ3MiOiJBQXVCQSxJQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxJQUFELENBQWxCOztBQUNBLElBQU1DLElBQUksR0FBR0QsT0FBTyxDQUFDLE1BQUQsQ0FBcEI7O0FBQ0EsSUFBTUUsRUFBRSxHQUFHRixPQUFPLENBQUMsSUFBRCxDQUFsQjs7QUFFQSxTQUFTRyxHQUFULENBQWNDLE9BQWQsRUFBcUM7RUFDbkNDLE9BQU8sQ0FBQ0YsR0FBUixzQkFBK0JDLE9BQS9CO0FBQ0Q7O0FBRUQsSUFBTUUsT0FBTyxHQUFHLElBQWhCO0FBQ0EsSUFBTUMsY0FBYyxHQUFHLCtCQUF2QjtBQUNBLElBQU1DLFdBQVcsR0FBRyxNQUFwQjtBQUNBLElBQU1DLGNBQWMsR0FBRyxZQUF2Qjs7QUFHQSxTQUFTQyxLQUFULENBQWdCQyxHQUFoQixFQUE0Q0MsT0FBNUMsRUFBeUc7RUFDdkcsSUFBTUMsS0FBSyxHQUFHQyxPQUFPLENBQUNGLE9BQU8sSUFBSUEsT0FBTyxDQUFDQyxLQUFwQixDQUFyQjtFQUNBLElBQU1FLEdBQUcsR0FBRyxFQUFaO0VBR0FKLEdBQUcsQ0FBQ0ssUUFBSixHQUFlQyxLQUFmLENBQXFCUixjQUFyQixFQUFxQ1MsT0FBckMsQ0FBNkMsVUFBVUMsSUFBVixFQUFnQkMsR0FBaEIsRUFBcUI7SUFFaEUsSUFBTUMsV0FBVyxHQUFHRixJQUFJLENBQUNH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