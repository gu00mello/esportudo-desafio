3c88dc738fde07307293fcb86bcdaa45
var util = require('util');

var Stream = require('stream').Stream;

var DelayedStream = require('delayed-stream');

module.exports = CombinedStream;

function CombinedStream() {
  this.writable = false;
  this.readable = true;
  this.dataSize = 0;
  this.maxDataSize = 2 * 1024 * 1024;
  this.pauseStreams = true;
  this._released = false;
  this._streams = [];
  this._currentStream = null;
  this._insideLoop = false;
  this._pendingNext = false;
}

util.inherits(CombinedStream, Stream);

CombinedStream.create = function (options) {
  var combinedStream = new this();
  options = options || {};

  for (var option in options) {
    combinedStream[option] = options[option];
  }

  return combinedStream;
};

CombinedStream.isStreamLike = function (stream) {
  return typeof stream !== 'function' && typeof stream !== 'string' && typeof stream !== 'boolean' && typeof stream !== 'number' && !Buffer.isBuffer(stream);
};

CombinedStream.prototype.append = function (stream) {
  var isStreamLike = CombinedStream.isStreamLike(stream);

  if (isStreamLike) {
    if (!(stream instanceof DelayedStream)) {
      var newStream = DelayedStream.create(stream, {
        maxDataSize: Infinity,
        pauseStream: this.pauseStreams
      });
      stream.on('data', this._checkDataSize.bind(this));
      stream = newStream;
    }

    this._handleErrors(stream);

    if (this.pauseStreams) {
      stream.pause();
    }
  }

  this._streams.push(stream);

  return this;
};

CombinedStream.prototype.pipe = function (dest, options) {
  Stream.prototype.pipe.call(this, dest, options);
  this.resume();
  return dest;
};

CombinedStream.prototype._getNext = function () {
  this._currentStream = null;

  if (this._insideLoop) {
    this._pendingNext = true;
    return;
  }

  this._insideLoop = true;

  try {
    do {
      this._pendingNext = false;

      this._realGetNext();
    } while (this._pendingNext);
  } finally {
    this._insideLoop = false;
  }
};

CombinedStream.prototype._realGetNext = function () {
  var stream = this._streams.shift();

  if (typeof stream == 'undefined') {
    this.end();
    return;
  }

  if (typeof stream !== 'function') {
    this._pipeNext(stream);

    return;
  }

  var getStream = stream;
  getStream(function (stream) {
    var isStreamLike = CombinedStream.isStreamLike(stream);

    if (isStreamLike) {
      stream.on('data', this._checkDataSize.bind(this));

      this._handleErrors(stream);
    }

    this._pipeNext(stream);
  }.bind(this));
};

CombinedStream.prototype._pipeNext = function (stream) {
  this._currentStream = stream;
  var isStreamLike = CombinedStream.isStreamLike(stream);

  if (isStreamLike) {
    stream.on('end', this._getNext.bind(this));
    stream.pipe(this, {
      end: false
    });
    return;
  }

  var value = stream;
  this.write(value);

  this._getNext();
};

CombinedStream.prototype._handleErrors = function (stream) {
  var self = this;
  stream.on('error', function (err) {
    self._emitError(err);
  });
};

CombinedStream.prototype.write = function (data) {
  this.emit('data', data);
};

CombinedStream.prototype.pause = function () {
  if (!this.pauseStreams) {
    return;
  }

  if (this.pauseStreams && this._currentStream && typeof this._currentStream.pause == 'function') this._currentStream.pause();
  this.emit('pause');
};

CombinedStream.prototype.resume = function () {
  if (!this._released) {
    this._released = true;
    this.writable = true;

    this._getNext();
  }

  if (this.pauseStreams && this._currentStream && typeof this._currentStream.resume == 'function') this._currentStream.resume();
  this.emit('resume');
};

CombinedStream.prototype.end = function () {
  this._reset();

  this.emit('end');
};

CombinedStream.prototype.destroy = function () {
  this._reset();

  this.emit('close');
};

CombinedStream.prototype._reset = function () {
  this.writable = false;
  this._streams = [];
  this._currentStream = null;
};

CombinedStream.prototype._checkDataSize = function () {
  this._updateDataSize();

  if (this.dataSize <= this.maxDataSize) {
    return;
  }

  var message = 'DelayedStream#maxDataSize of ' + this.maxDataSize + ' bytes exceeded.';

  this._emitError(new Error(message));
};

CombinedStream.prototype._updateDataSize = function () {
  this.dataSize = 0;
  var self = this;

  this._streams.forEach(function (stream) {
    if (!stream.dataSize) {
      return;
    }

    self.dataSize += stream.dataSize;
  });

  if (this._currentStream && this._currentStream.dataSize) {
    this.dataSize += this._currentStream.dataSize;
  }
};

CombinedStream.prototype._emitError = function (err) {
  this._reset();

  this.emit('error', err);
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1dGlsIiwicmVxdWlyZSIsIlN0cmVhbSIsIkRlbGF5ZWRTdHJlYW0iLCJtb2R1bGUiLCJleHBvcnRzIiwiQ29tYmluZWRTdHJlYW0iLCJ3cml0YWJsZSIsInJlYWRhYmxlIiwiZGF0YVNpemUiLCJtYXhEYXRhU2l6ZSIsInBhdXNlU3RyZWFtcyIsIl9yZWxlYXNlZCIsIl9zdHJlYW1zIiwiX2N1cnJlbnRTdHJlYW0iLCJfaW5zaWRlTG9vcCIsIl9wZW5kaW5nTmV4dCIsImluaGVyaXRzIiwiY3JlYXRlIiwib3B0aW9ucyIsImNvbWJpbmVkU3RyZWFtIiwib3B0aW9uIiwiaXNTdHJlYW1MaWtlIiwic3RyZWFtIiwiQnVmZmVyIiwiaXNCdWZmZXIiLCJwcm90b3R5cGUiLCJhcHBlbmQiLCJuZXdTdHJlYW0iLCJJbmZpbml0eSIsInBhdXNlU3RyZWFtIiwib24iLCJfY2hlY2tEYXRhU2l6ZSIsImJpbmQiLCJfaGFuZGxlRXJyb3JzIiwicGF1c2UiLCJwdXNoIiwicGlwZSIsImRlc3QiLCJjYWxsIiwicmVzdW1lIiwiX2dldE5leHQiLCJfcmVhbEdldE5leHQiLCJzaGlmdCIsImVuZCIsIl9waXBlTmV4dCIsImdldFN0cmVhbSIsInZhbHVlIiwid3JpdGUiLCJzZWxmIiwiZXJyIiwiX2VtaXRFcnJvciIsImRhdGEiLCJlbWl0IiwiX3Jlc2V0IiwiZGVzdHJveSIsIl91cGRhdGVEYXRhU2l6ZSIsIm1lc3NhZ2UiLCJFcnJvciIsImZvckVhY2giXSwic291cmNlcyI6WyJjb21iaW5lZF9zdHJlYW0uanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG52YXIgU3RyZWFtID0gcmVxdWlyZSgnc3RyZWFtJykuU3RyZWFtO1xudmFyIERlbGF5ZWRTdHJlYW0gPSByZXF1aXJlKCdkZWxheWVkLXN0cmVhbScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENvbWJpbmVkU3RyZWFtO1xuZnVuY3Rpb24gQ29tYmluZWRTdHJlYW0oKSB7XG4gIHRoaXMud3JpdGFibGUgPSBmYWxzZTtcbiAgdGhpcy5yZWFkYWJsZSA9IHRydWU7XG4gIHRoaXMuZGF0YVNpemUgPSAwO1xuICB0aGlzLm1heERhdGFTaXplID0gMiAqIDEwMjQgKiAxMDI0O1xuICB0aGlzLnBhdXNlU3RyZWFtcyA9IHRydWU7XG5cbiAgdGhpcy5fcmVsZWFzZWQgPSBmYWxzZTtcbiAgdGhpcy5fc3RyZWFtcyA9IFtdO1xuICB0aGlzLl9jdXJyZW50U3RyZWFtID0gbnVsbDtcbiAgdGhpcy5faW5zaWRlTG9vcCA9IGZhbHNlO1xuICB0aGlzLl9wZW5kaW5nTmV4dCA9IGZhbHNlO1xufVxudXRpbC5pbmhlcml0cyhDb21iaW5lZFN0cmVhbSwgU3RyZWFtKTtcblxuQ29tYmluZWRTdHJlYW0uY3JlYXRlID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICB2YXIgY29tYmluZWRTdHJlYW0gPSBuZXcgdGhpcygpO1xuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBmb3IgKHZhciBvcHRpb24gaW4gb3B0aW9ucykge1xuICAgIGNvbWJpbmVkU3RyZWFtW29wdGlvbl0gPSBvcHRpb25zW29wdGlvbl07XG4gIH1cblxuICByZXR1cm4gY29tYmluZWRTdHJlYW07XG59O1xuXG5Db21iaW5lZFN0cmVhbS5pc1N0cmVhbUxpa2UgPSBmdW5jdGlvbihzdHJlYW0pIHtcbiAgcmV0dXJuICh0eXBlb2Ygc3RyZWFtICE9PSAnZnVuY3Rpb24nKVxuICAgICYmICh0eXBlb2Ygc3RyZWFtICE9PSAnc3RyaW5nJylcbiAgICAmJiAodHlwZW9mIHN0cmVhbSAhPT0gJ2Jvb2xlYW4nKVxuICAgICYmICh0eXBlb2Ygc3RyZWFtICE9PSAnbnVtYmVyJylcbiAgICAmJiAoIUJ1ZmZlci5pc0J1ZmZlcihzdHJlYW0pKTtcbn07XG5cbkNvbWJpbmVkU3RyZWFtLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbihzdHJlYW0pIHtcbiAgdmFyIGlzU3RyZWFtTGlrZSA9IENvbWJpbmVkU3RyZWFtLmlzU3RyZWFtTGlrZShzdHJlYW0pO1xuXG4gIGlmIChpc1N0cmVhbUxpa2UpIHtcbiAgICBpZiAoIShzdHJlYW0gaW5zdGFuY2VvZiBEZWxheWVkU3RyZWFtKSkge1xuICAgICAgdmFyIG5ld1N0cmVhbSA9IERlbGF5ZWRTdHJlYW0uY3JlYXRlKHN0cmVhbSwge1xuICAgICAgICBtYXhEYXRhU2l6ZTogSW5maW5pdHksXG4gICAgICAgIHBhdXNlU3RyZWFtOiB0aGlzLnBhdXNlU3RyZWFtcyxcbiAgICAgIH0pO1xuICAgICAgc3RyZWFtLm9uKCdkYXRhJywgdGhpcy5fY2hlY2tEYXRhU2l6ZS5iaW5kKHRoaXMpKTtcbiAgICAgIHN0cmVhbSA9IG5ld1N0cmVhbTtcbiAgICB9XG5cbiAgICB0aGlzLl9oYW5kbGVFcnJvcnMoc3RyZWFtKTtcblxuICAgIGlmICh0aGlzLnBhdXNlU3RyZWFtcykge1xuICAgICAgc3RyZWFtLnBhdXNlKCk7XG4gICAgfVxuICB9XG5cbiAgdGhpcy5fc3RyZWFtcy5wdXNoKHN0cmVhbSk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuQ29tYmluZWRTdHJlYW0ucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbihkZXN0LCBvcHRpb25zKSB7XG4gIFN0cmVhbS5wcm90b3R5cGUucGlwZS5jYWxsKHRoaXMsIGRlc3QsIG9wdGlvbnMpO1xuICB0aGlzLnJlc3VtZSgpO1xuICByZXR1cm4gZGVzdDtcbn07XG5cbkNvbWJpbmVkU3RyZWFtLnByb3RvdHlwZS5fZ2V0TmV4dCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9jdXJyZW50U3RyZWFtID0gbnVsbDtcblxuICBpZiAodGhpcy5faW5zaWRlTG9vcCkge1xuICAgIHRoaXMuX3BlbmRpbmdOZXh0ID0gdHJ1ZTtcbiAgICByZXR1cm47IC8vIGRlZmVyIGNhbGxcbiAgfVxuXG4gIHRoaXMuX2luc2lkZUxvb3AgPSB0cnVlO1xuICB0cnkge1xuICAgIGRvIHtcbiAgICAgIHRoaXMuX3BlbmRpbmdOZXh0ID0gZmFsc2U7XG4gICAgICB0aGlzLl9yZWFsR2V0TmV4dCgpO1xuICAgIH0gd2hpbGUgKHRoaXMuX3BlbmRpbmdOZXh0KTtcbiAgfSBmaW5hbGx5IHtcbiAgICB0aGlzLl9pbnNpZGVMb29wID0gZmFsc2U7XG4gIH1cbn07XG5cbkNvbWJpbmVkU3RyZWFtLnByb3RvdHlwZS5fcmVhbEdldE5leHQgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHN0cmVhbSA9IHRoaXMuX3N0cmVhbXMuc2hpZnQoKTtcblxuXG4gIGlmICh0eXBlb2Ygc3RyZWFtID09ICd1bmRlZmluZWQnKSB7XG4gICAgdGhpcy5lbmQoKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAodHlwZW9mIHN0cmVhbSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRoaXMuX3BpcGVOZXh0KHN0cmVhbSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGdldFN0cmVhbSA9IHN0cmVhbTtcbiAgZ2V0U3RyZWFtKGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgIHZhciBpc1N0cmVhbUxpa2UgPSBDb21iaW5lZFN0cmVhbS5pc1N0cmVhbUxpa2Uoc3RyZWFtKTtcbiAgICBpZiAoaXNTdHJlYW1MaWtlKSB7XG4gICAgICBzdHJlYW0ub24oJ2RhdGEnLCB0aGlzLl9jaGVja0RhdGFTaXplLmJpbmQodGhpcykpO1xuICAgICAgdGhpcy5faGFuZGxlRXJyb3JzKHN0cmVhbSk7XG4gICAgfVxuXG4gICAgdGhpcy5fcGlwZU5leHQoc3RyZWFtKTtcbiAgfS5iaW5kKHRoaXMpKTtcbn07XG5cbkNvbWJpbmVkU3RyZWFtLnByb3RvdHlwZS5fcGlwZU5leHQgPSBmdW5jdGlvbihzdHJlYW0pIHtcbiAgdGhpcy5fY3VycmVudFN0cmVhbSA9IHN0cmVhbTtcblxuICB2YXIgaXNTdHJlYW1MaWtlID0gQ29tYmluZWRTdHJlYW0uaXNTdHJlYW1MaWtlKHN0cmVhbSk7XG4gIGlmIChpc1N0cmVhbUxpa2UpIHtcbiAgICBzdHJlYW0ub24oJ2VuZCcsIHRoaXMuX2dldE5leHQuYmluZCh0aGlzKSk7XG4gICAgc3RyZWFtLnBpcGUodGhpcywge2VuZDogZmFsc2V9KTtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgdmFsdWUgPSBzdHJlYW07XG4gIHRoaXMud3JpdGUodmFsdWUpO1xuICB0aGlzLl9nZXROZXh0KCk7XG59O1xuXG5Db21iaW5lZFN0cmVhbS5wcm90b3R5cGUuX2hhbmRsZUVycm9ycyA9IGZ1bmN0aW9uKHN0cmVhbSkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHN0cmVhbS5vbignZXJyb3InLCBmdW5jdGlvbihlcnIpIHtcbiAgICBzZWxmLl9lbWl0RXJyb3IoZXJyKTtcbiAgfSk7XG59O1xuXG5Db21iaW5lZFN0cmVhbS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbihkYXRhKSB7XG4gIHRoaXMuZW1pdCgnZGF0YScsIGRhdGEpO1xufTtcblxuQ29tYmluZWRTdHJlYW0ucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24oKSB7XG4gIGlmICghdGhpcy5wYXVzZVN0cmVhbXMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZih0aGlzLnBhdXNlU3RyZWFtcyAmJiB0aGlzLl9jdXJyZW50U3RyZWFtICYmIHR5cGVvZih0aGlzLl9jdXJyZW50U3RyZWFtLnBhdXNlKSA9PSAnZnVuY3Rpb24nKSB0aGlzLl9jdXJyZW50U3RyZWFtLnBhdXNlKCk7XG4gIHRoaXMuZW1pdCgncGF1c2UnKTtcbn07XG5cbkNvbWJpbmVkU3RyZWFtLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbigpIHtcbiAgaWYgKCF0aGlzLl9yZWxlYXNlZCkge1xuICAgIHRoaXMuX3JlbGVhc2VkID0gdHJ1ZTtcbiAgICB0aGlzLndyaXRhYmxlID0gdHJ1ZTtcbiAgICB0aGlzLl9nZXROZXh0KCk7XG4gIH1cblxuICBpZih0aGlzLnBhdXNlU3RyZWFtcyAmJiB0aGlzLl9jdXJyZW50U3RyZWFtICYmIHR5cGVvZih0aGlzLl9jdXJyZW50U3RyZWFtLnJlc3VtZSkgPT0gJ2Z1bmN0aW9uJykgdGhpcy5fY3VycmVudFN0cmVhbS5yZXN1bWUoKTtcbiAgdGhpcy5lbWl0KCdyZXN1bWUnKTtcbn07XG5cbkNvbWJpbmVkU3RyZWFtLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fcmVzZXQoKTtcbiAgdGhpcy5lbWl0KCdlbmQnKTtcbn07XG5cbkNvbWJpbmVkU3RyZWFtLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX3Jlc2V0KCk7XG4gIHRoaXMuZW1pdCgnY2xvc2UnKTtcbn07XG5cbkNvbWJpbmVkU3RyZWFtLnByb3RvdHlwZS5fcmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy53cml0YWJsZSA9IGZhbHNlO1xuICB0aGlzLl9zdHJlYW1zID0gW107XG4gIHRoaXMuX2N1cnJlbnRTdHJlYW0gPSBudWxsO1xufTtcblxuQ29tYmluZWRTdHJlYW0ucHJvdG90eXBlLl9jaGVja0RhdGFTaXplID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX3VwZGF0ZURhdGFTaXplKCk7XG4gIGlmICh0aGlzLmRhdGFTaXplIDw9IHRoaXMubWF4RGF0YVNpemUpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgbWVzc2FnZSA9XG4gICAgJ0RlbGF5ZWRTdHJlYW0jbWF4RGF0YVNpemUgb2YgJyArIHRoaXMubWF4RGF0YVNpemUgKyAnIGJ5dGVzIGV4Y2VlZGVkLic7XG4gIHRoaXMuX2VtaXRFcnJvcihuZXcgRXJyb3IobWVzc2FnZSkpO1xufTtcblxuQ29tYmluZWRTdHJlYW0ucHJvdG90eXBlLl91cGRhdGVEYXRhU2l6ZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmRhdGFTaXplID0gMDtcblxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHRoaXMuX3N0cmVhbXMuZm9yRWFjaChmdW5jdGlvbihzdHJlYW0pIHtcbiAgICBpZiAoIXN0cmVhbS5kYXRhU2l6ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNlbGYuZGF0YVNpemUgKz0gc3RyZWFtLmRhdGFTaXplO1xuICB9KTtcblxuICBpZiAodGhpcy5fY3VycmVudFN0cmVhbSAmJiB0aGlzLl9jdXJyZW50U3RyZWFtLmRhdGFTaXplKSB7XG4gICAgdGhpcy5kYXRhU2l6ZSArPSB0aGlzLl9jdXJyZW50U3RyZWFtLmRhdGFTaXplO1xuICB9XG59O1xuXG5Db21iaW5lZFN0cmVhbS5wcm90b3R5cGUuX2VtaXRFcnJvciA9IGZ1bmN0aW9uKGVycikge1xuICB0aGlzLl9yZXNldCgpO1xuICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLElBQUksR0FBR0MsT0FBTyxDQUFDLE1BQUQsQ0FBbEI7O0FBQ0EsSUFBSUMsTUFBTSxHQUFHRCxPQUFPLENBQUMsUUFBRCxDQUFQLENBQWtCQyxNQUEvQjs7QUFDQSxJQUFJQyxhQUFhLEdBQUdGLE9BQU8sQ0FBQyxnQkFBRCxDQUEzQjs7QUFFQUcsTUFBTSxDQUFDQyxPQUFQLEdBQWlCQyxjQUFqQjs7QUFDQSxTQUFTQSxjQUFULEdBQTBCO0VBQ3hCLEtBQUtDLFFBQUwsR0FBZ0IsS0FBaEI7RUFDQSxLQUFLQyxRQUFMLEdBQWdCLElBQWhCO0VBQ0EsS0FBS0MsUUFBTCxHQUFnQixDQUFoQjtFQUNBLEtBQUtDLFdBQUwsR0FBbUIsSUFBSSxJQUFKLEdBQVcsSUFBOUI7RUFDQSxLQUFLQyxZQUFMLEdBQW9CLElBQXBCO0VBRUEsS0FBS0MsU0FBTCxHQUFpQixLQUFqQjtFQUNBLEtBQUtDLFFBQUwsR0FBZ0IsRUFBaEI7RUFDQSxLQUFLQyxjQUFMLEdBQXNCLElBQXRCO0VBQ0EsS0FBS0MsV0FBTCxHQUFtQixLQUFuQjtFQUNBLEtBQUtDLFlBQUwsR0FBb0IsS0FBcEI7QUFDRDs7QUFDRGhCLElBQUksQ0FBQ2lCLFFBQUwsQ0FBY1gsY0FBZCxFQUE4QkosTUFBOUI7O0FBRUFJLGNBQWMsQ0FBQ1ksTUFBZixHQUF3QixVQUFTQyxPQUFULEVBQWtCO0VBQ3hDLElBQUlDLGNBQWMsR0FBRyxJQUFJLElBQUosRUFBckI7RUFFQUQsT0FBTyxHQUFHQSxPQUFPLElBQUksRUFBckI7O0VB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