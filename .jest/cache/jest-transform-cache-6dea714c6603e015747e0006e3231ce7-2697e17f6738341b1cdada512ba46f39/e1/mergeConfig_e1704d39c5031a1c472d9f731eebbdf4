77471d31613a3e698ca85bdc67438c68
'use strict';

var utils = require('../utils');

module.exports = function mergeConfig(config1, config2) {
  config2 = config2 || {};
  var config = {};

  function getMergedValue(target, source) {
    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {
      return utils.merge(target, source);
    } else if (utils.isPlainObject(source)) {
      return utils.merge({}, source);
    } else if (utils.isArray(source)) {
      return source.slice();
    }

    return source;
  }

  function mergeDeepProperties(prop) {
    if (!utils.isUndefined(config2[prop])) {
      return getMergedValue(config1[prop], config2[prop]);
    } else if (!utils.isUndefined(config1[prop])) {
      return getMergedValue(undefined, config1[prop]);
    }
  }

  function valueFromConfig2(prop) {
    if (!utils.isUndefined(config2[prop])) {
      return getMergedValue(undefined, config2[prop]);
    }
  }

  function defaultToConfig2(prop) {
    if (!utils.isUndefined(config2[prop])) {
      return getMergedValue(undefined, config2[prop]);
    } else if (!utils.isUndefined(config1[prop])) {
      return getMergedValue(undefined, config1[prop]);
    }
  }

  function mergeDirectKeys(prop) {
    if (prop in config2) {
      return getMergedValue(config1[prop], config2[prop]);
    } else if (prop in config1) {
      return getMergedValue(undefined, config1[prop]);
    }
  }

  var mergeMap = {
    'url': valueFromConfig2,
    'method': valueFromConfig2,
    'data': valueFromConfig2,
    'baseURL': defaultToConfig2,
    'transformRequest': defaultToConfig2,
    'transformResponse': defaultToConfig2,
    'paramsSerializer': defaultToConfig2,
    'timeout': defaultToConfig2,
    'timeoutMessage': defaultToConfig2,
    'withCredentials': defaultToConfig2,
    'adapter': defaultToConfig2,
    'responseType': defaultToConfig2,
    'xsrfCookieName': defaultToConfig2,
    'xsrfHeaderName': defaultToConfig2,
    'onUploadProgress': defaultToConfig2,
    'onDownloadProgress': defaultToConfig2,
    'decompress': defaultToConfig2,
    'maxContentLength': defaultToConfig2,
    'maxBodyLength': defaultToConfig2,
    'beforeRedirect': defaultToConfig2,
    'transport': defaultToConfig2,
    'httpAgent': defaultToConfig2,
    'httpsAgent': defaultToConfig2,
    'cancelToken': defaultToConfig2,
    'socketPath': defaultToConfig2,
    'responseEncoding': defaultToConfig2,
    'validateStatus': mergeDirectKeys
  };
  utils.forEach(Object.keys(config1).concat(Object.keys(config2)), function computeConfigValue(prop) {
    var merge = mergeMap[prop] || mergeDeepProperties;
    var configValue = merge(prop);
    utils.isUndefined(configValue) && merge !== mergeDirectKeys || (config[prop] = configValue);
  });
  return config;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1dGlscyIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwibWVyZ2VDb25maWciLCJjb25maWcxIiwiY29uZmlnMiIsImNvbmZpZyIsImdldE1lcmdlZFZhbHVlIiwidGFyZ2V0Iiwic291cmNlIiwiaXNQbGFpbk9iamVjdCIsIm1lcmdlIiwiaXNBcnJheSIsInNsaWNlIiwibWVyZ2VEZWVwUHJvcGVydGllcyIsInByb3AiLCJpc1VuZGVmaW5lZCIsInVuZGVmaW5lZCIsInZhbHVlRnJvbUNvbmZpZzIiLCJkZWZhdWx0VG9Db25maWcyIiwibWVyZ2VEaXJlY3RLZXlzIiwibWVyZ2VNYXAiLCJmb3JFYWNoIiwiT2JqZWN0Iiwia2V5cyIsImNvbmNhdCIsImNvbXB1dGVDb25maWdWYWx1ZSIsImNvbmZpZ1ZhbHVlIl0sInNvdXJjZXMiOlsibWVyZ2VDb25maWcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xuXG4vKipcbiAqIENvbmZpZy1zcGVjaWZpYyBtZXJnZS1mdW5jdGlvbiB3aGljaCBjcmVhdGVzIGEgbmV3IGNvbmZpZy1vYmplY3RcbiAqIGJ5IG1lcmdpbmcgdHdvIGNvbmZpZ3VyYXRpb24gb2JqZWN0cyB0b2dldGhlci5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnMVxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZzJcbiAqIEByZXR1cm5zIHtPYmplY3R9IE5ldyBvYmplY3QgcmVzdWx0aW5nIGZyb20gbWVyZ2luZyBjb25maWcyIHRvIGNvbmZpZzFcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBtZXJnZUNvbmZpZyhjb25maWcxLCBjb25maWcyKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICBjb25maWcyID0gY29uZmlnMiB8fCB7fTtcbiAgdmFyIGNvbmZpZyA9IHt9O1xuXG4gIGZ1bmN0aW9uIGdldE1lcmdlZFZhbHVlKHRhcmdldCwgc291cmNlKSB7XG4gICAgaWYgKHV0aWxzLmlzUGxhaW5PYmplY3QodGFyZ2V0KSAmJiB1dGlscy5pc1BsYWluT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgIHJldHVybiB1dGlscy5tZXJnZSh0YXJnZXQsIHNvdXJjZSk7XG4gICAgfSBlbHNlIGlmICh1dGlscy5pc1BsYWluT2JqZWN0KHNvdXJjZSkpIHtcbiAgICAgIHJldHVybiB1dGlscy5tZXJnZSh7fSwgc291cmNlKTtcbiAgICB9IGVsc2UgaWYgKHV0aWxzLmlzQXJyYXkoc291cmNlKSkge1xuICAgICAgcmV0dXJuIHNvdXJjZS5zbGljZSgpO1xuICAgIH1cbiAgICByZXR1cm4gc291cmNlO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIGZ1bmN0aW9uIG1lcmdlRGVlcFByb3BlcnRpZXMocHJvcCkge1xuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoY29uZmlnMltwcm9wXSkpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZShjb25maWcxW3Byb3BdLCBjb25maWcyW3Byb3BdKTtcbiAgICB9IGVsc2UgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChjb25maWcxW3Byb3BdKSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgY29uZmlnMVtwcm9wXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIGZ1bmN0aW9uIHZhbHVlRnJvbUNvbmZpZzIocHJvcCkge1xuICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoY29uZmlnMltwcm9wXSkpIHtcbiAgICAgIHJldHVybiBnZXRNZXJnZWRWYWx1ZSh1bmRlZmluZWQsIGNvbmZpZzJbcHJvcF0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICBmdW5jdGlvbiBkZWZhdWx0VG9Db25maWcyKHByb3ApIHtcbiAgICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGNvbmZpZzJbcHJvcF0pKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBjb25maWcyW3Byb3BdKTtcbiAgICB9IGVsc2UgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChjb25maWcxW3Byb3BdKSkge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgY29uZmlnMVtwcm9wXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG4gIGZ1bmN0aW9uIG1lcmdlRGlyZWN0S2V5cyhwcm9wKSB7XG4gICAgaWYgKHByb3AgaW4gY29uZmlnMikge1xuICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKGNvbmZpZzFbcHJvcF0sIGNvbmZpZzJbcHJvcF0pO1xuICAgIH0gZWxzZSBpZiAocHJvcCBpbiBjb25maWcxKSB7XG4gICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUodW5kZWZpbmVkLCBjb25maWcxW3Byb3BdKTtcbiAgICB9XG4gIH1cblxuICB2YXIgbWVyZ2VNYXAgPSB7XG4gICAgJ3VybCc6IHZhbHVlRnJvbUNvbmZpZzIsXG4gICAgJ21ldGhvZCc6IHZhbHVlRnJvbUNvbmZpZzIsXG4gICAgJ2RhdGEnOiB2YWx1ZUZyb21Db25maWcyLFxuICAgICdiYXNlVVJMJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAndHJhbnNmb3JtUmVxdWVzdCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3RyYW5zZm9ybVJlc3BvbnNlJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAncGFyYW1zU2VyaWFsaXplcic6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3RpbWVvdXQnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICd0aW1lb3V0TWVzc2FnZSc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3dpdGhDcmVkZW50aWFscyc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2FkYXB0ZXInOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdyZXNwb25zZVR5cGUnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICd4c3JmQ29va2llTmFtZSc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3hzcmZIZWFkZXJOYW1lJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnb25VcGxvYWRQcm9ncmVzcyc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ29uRG93bmxvYWRQcm9ncmVzcyc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2RlY29tcHJlc3MnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICdtYXhDb250ZW50TGVuZ3RoJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnbWF4Qm9keUxlbmd0aCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2JlZm9yZVJlZGlyZWN0JzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAndHJhbnNwb3J0JzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnaHR0cEFnZW50JzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnaHR0cHNBZ2VudCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ2NhbmNlbFRva2VuJzogZGVmYXVsdFRvQ29uZmlnMixcbiAgICAnc29ja2V0UGF0aCc6IGRlZmF1bHRUb0NvbmZpZzIsXG4gICAgJ3Jlc3BvbnNlRW5jb2RpbmcnOiBkZWZhdWx0VG9Db25maWcyLFxuICAgICd2YWxpZGF0ZVN0YXR1cyc6IG1lcmdlRGlyZWN0S2V5c1xuICB9O1xuXG4gIHV0aWxzLmZvckVhY2goT2JqZWN0LmtleXMoY29uZmlnMSkuY29uY2F0KE9iamVjdC5rZXlzKGNvbmZpZzIpKSwgZnVuY3Rpb24gY29tcHV0ZUNvbmZpZ1ZhbHVlKHByb3ApIHtcbiAgICB2YXIgbWVyZ2UgPSBtZXJnZU1hcFtwcm9wXSB8fCBtZXJnZURlZXBQcm9wZXJ0aWVzO1xuICAgIHZhciBjb25maWdWYWx1ZSA9IG1lcmdlKHByb3ApO1xuICAgICh1dGlscy5pc1VuZGVmaW5lZChjb25maWdWYWx1ZSkgJiYgbWVyZ2UgIT09IG1lcmdlRGlyZWN0S2V5cykgfHwgKGNvbmZpZ1twcm9wXSA9IGNvbmZpZ1ZhbHVlKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNvbmZpZztcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLElBQUlBLEtBQUssR0FBR0MsT0FBTyxDQUFDLFVBQUQsQ0FBbkI7O0FBVUFDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQixTQUFTQyxXQUFULENBQXFCQyxPQUFyQixFQUE4QkMsT0FBOUIsRUFBdUM7RUFFdERBLE9BQU8sR0FBR0EsT0FBTyxJQUFJLEVBQXJCO0VBQ0EsSUFBSUMsTUFBTSxHQUFHLEVBQWI7O0VBRUEsU0FBU0MsY0FBVCxDQUF3QkMsTUFBeEIsRUFBZ0NDLE1BQWhDLEVBQXdDO0lBQ3RDLElBQUlWLEtBQUssQ0FBQ1csYUFBTixDQUFvQkYsTUFBcEIsS0FBK0JULEtBQUssQ0FBQ1csYUFBTixDQUFvQkQsTUFBcEIsQ0FBbkMsRUFBZ0U7TUFDOUQsT0FBT1YsS0FBSyxDQUFDWSxLQUFOLENBQVlILE1BQVosRUFBb0JDLE1BQXBCLENBQVA7SUFDRCxDQUZELE1BRU8sSUFBSVYsS0FBSyxDQUFDVyxhQUFOLENBQW9CRCxNQUFwQixDQUFKLEVBQWlDO01BQ3RDLE9BQU9WLEtBQUssQ0FBQ1ksS0FBTixDQUFZLEVBQVosRUFBZ0JGLE1BQWhCLENBQVA7SUFDRCxDQUZNLE1BRUEsSUFBSVYsS0FBSyxDQUFDYSxPQUFOLENBQWNILE1BQWQsQ0FBSixFQUEyQjtNQUNoQyxPQUFPQSxNQUFNLENBQUNJLEtBQVAsRUFBUDtJQUNEOztJQUNELE9BQU9KLE1BQVA7RUFDRDs7RUFHRCxTQUFTSyxtQkFBVCxDQUE2QkMsSUFBN0IsRUFBbUM7SUFDakMsSUFBSSxDQUFDaEIsS0FBSyxDQUFDaUIsV0FBTixDQUFrQlgsT0FBTyxDQUFDVSxJQUFELENBQXpCLENBQUwsRUFBdUM7TUFDckMs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