094e2af5d5be086e5e9d6650f4bad2e5
'use strict';

var asap = require('asap/raw');

function noop() {}

var LAST_ERROR = null;
var IS_ERROR = {};

function getThen(obj) {
  try {
    return obj.then;
  } catch (ex) {
    LAST_ERROR = ex;
    return IS_ERROR;
  }
}

function tryCallOne(fn, a) {
  try {
    return fn(a);
  } catch (ex) {
    LAST_ERROR = ex;
    return IS_ERROR;
  }
}

function tryCallTwo(fn, a, b) {
  try {
    fn(a, b);
  } catch (ex) {
    LAST_ERROR = ex;
    return IS_ERROR;
  }
}

module.exports = Promise;

function Promise(fn) {
  if (typeof this !== 'object') {
    throw new TypeError('Promises must be constructed via new');
  }

  if (typeof fn !== 'function') {
    throw new TypeError('Promise constructor\'s argument is not a function');
  }

  this._U = 0;
  this._V = 0;
  this._W = null;
  this._X = null;
  if (fn === noop) return;
  doResolve(fn, this);
}

Promise._Y = null;
Promise._Z = null;
Promise._0 = noop;

Promise.prototype.then = function (onFulfilled, onRejected) {
  if (this.constructor !== Promise) {
    return safeThen(this, onFulfilled, onRejected);
  }

  var res = new Promise(noop);
  handle(this, new Handler(onFulfilled, onRejected, res));
  return res;
};

function safeThen(self, onFulfilled, onRejected) {
  return new self.constructor(function (resolve, reject) {
    var res = new Promise(noop);
    res.then(resolve, reject);
    handle(self, new Handler(onFulfilled, onRejected, res));
  });
}

function handle(self, deferred) {
  while (self._V === 3) {
    self = self._W;
  }

  if (Promise._Y) {
    Promise._Y(self);
  }

  if (self._V === 0) {
    if (self._U === 0) {
      self._U = 1;
      self._X = deferred;
      return;
    }

    if (self._U === 1) {
      self._U = 2;
      self._X = [self._X, deferred];
      return;
    }

    self._X.push(deferred);

    return;
  }

  handleResolved(self, deferred);
}

function handleResolved(self, deferred) {
  asap(function () {
    var cb = self._V === 1 ? deferred.onFulfilled : deferred.onRejected;

    if (cb === null) {
      if (self._V === 1) {
        resolve(deferred.promise, self._W);
      } else {
        reject(deferred.promise, self._W);
      }

      return;
    }

    var ret = tryCallOne(cb, self._W);

    if (ret === IS_ERROR) {
      reject(deferred.promise, LAST_ERROR);
    } else {
      resolve(deferred.promise, ret);
    }
  });
}

function resolve(self, newValue) {
  if (newValue === self) {
    return reject(self, new TypeError('A promise cannot be resolved with itself.'));
  }

  if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {
    var then = getThen(newValue);

    if (then === IS_ERROR) {
      return reject(self, LAST_ERROR);
    }

    if (then === self.then && newValue instanceof Promise) {
      self._V = 3;
      self._W = newValue;
      finale(self);
      return;
    } else if (typeof then === 'function') {
      doResolve(then.bind(newValue), self);
      return;
    }
  }

  self._V = 1;
  self._W = newValue;
  finale(self);
}

function reject(self, newValue) {
  self._V = 2;
  self._W = newValue;

  if (Promise._Z) {
    Promise._Z(self, newValue);
  }

  finale(self);
}

function finale(self) {
  if (self._U === 1) {
    handle(self, self._X);
    self._X = null;
  }

  if (self._U === 2) {
    for (var i = 0; i < self._X.length; i++) {
      handle(self, self._X[i]);
    }

    self._X = null;
  }
}

function Handler(onFulfilled, onRejected, promise) {
  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;
  this.onRejected = typeof onRejected === 'function' ? onRejected : null;
  this.promise = promise;
}

function doResolve(fn, promise) {
  var done = false;
  var res = tryCallTwo(fn, function (value) {
    if (done) return;
    done = true;
    resolve(promise, value);
  }, function (reason) {
    if (done) return;
    done = true;
    reject(promise, reason);
  });

  if (!done && res === IS_ERROR) {
    done = true;
    reject(promise, LAST_ERROR);
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc2FwIiwicmVxdWlyZSIsIm5vb3AiLCJMQVNUX0VSUk9SIiwiSVNfRVJST1IiLCJnZXRUaGVuIiwib2JqIiwidGhlbiIsImV4IiwidHJ5Q2FsbE9uZSIsImZuIiwiYSIsInRyeUNhbGxUd28iLCJiIiwibW9kdWxlIiwiZXhwb3J0cyIsIlByb21pc2UiLCJUeXBlRXJyb3IiLCJfVSIsIl9WIiwiX1ciLCJfWCIsImRvUmVzb2x2ZSIsIl9ZIiwiX1oiLCJfMCIsInByb3RvdHlwZSIsIm9uRnVsZmlsbGVkIiwib25SZWplY3RlZCIsImNvbnN0cnVjdG9yIiwic2FmZVRoZW4iLCJyZXMiLCJoYW5kbGUiLCJIYW5kbGVyIiwic2VsZiIsInJlc29sdmUiLCJyZWplY3QiLCJkZWZlcnJlZCIsInB1c2giLCJoYW5kbGVSZXNvbHZlZCIsImNiIiwicHJvbWlzZSIsInJldCIsIm5ld1ZhbHVlIiwiZmluYWxlIiwiYmluZCIsImkiLCJsZW5ndGgiLCJkb25lIiwidmFsdWUiLCJyZWFzb24iXSwic291cmNlcyI6WyJjb3JlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIGFzYXAgPSByZXF1aXJlKCdhc2FwL3JhdycpO1xuXG5mdW5jdGlvbiBub29wKCkge31cblxuLy8gU3RhdGVzOlxuLy9cbi8vIDAgLSBwZW5kaW5nXG4vLyAxIC0gZnVsZmlsbGVkIHdpdGggX3ZhbHVlXG4vLyAyIC0gcmVqZWN0ZWQgd2l0aCBfdmFsdWVcbi8vIDMgLSBhZG9wdGVkIHRoZSBzdGF0ZSBvZiBhbm90aGVyIHByb21pc2UsIF92YWx1ZVxuLy9cbi8vIG9uY2UgdGhlIHN0YXRlIGlzIG5vIGxvbmdlciBwZW5kaW5nICgwKSBpdCBpcyBpbW11dGFibGVcblxuLy8gQWxsIGBfYCBwcmVmaXhlZCBwcm9wZXJ0aWVzIHdpbGwgYmUgcmVkdWNlZCB0byBgX3tyYW5kb20gbnVtYmVyfWBcbi8vIGF0IGJ1aWxkIHRpbWUgdG8gb2JmdXNjYXRlIHRoZW0gYW5kIGRpc2NvdXJhZ2UgdGhlaXIgdXNlLlxuLy8gV2UgZG9uJ3QgdXNlIHN5bWJvbHMgb3IgT2JqZWN0LmRlZmluZVByb3BlcnR5IHRvIGZ1bGx5IGhpZGUgdGhlbVxuLy8gYmVjYXVzZSB0aGUgcGVyZm9ybWFuY2UgaXNuJ3QgZ29vZCBlbm91Z2guXG5cblxuLy8gdG8gYXZvaWQgdXNpbmcgdHJ5L2NhdGNoIGluc2lkZSBjcml0aWNhbCBmdW5jdGlvbnMsIHdlXG4vLyBleHRyYWN0IHRoZW0gdG8gaGVyZS5cbnZhciBMQVNUX0VSUk9SID0gbnVsbDtcbnZhciBJU19FUlJPUiA9IHt9O1xuZnVuY3Rpb24gZ2V0VGhlbihvYmopIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gb2JqLnRoZW47XG4gIH0gY2F0Y2ggKGV4KSB7XG4gICAgTEFTVF9FUlJPUiA9IGV4O1xuICAgIHJldHVybiBJU19FUlJPUjtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cnlDYWxsT25lKGZuLCBhKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGZuKGEpO1xuICB9IGNhdGNoIChleCkge1xuICAgIExBU1RfRVJST1IgPSBleDtcbiAgICByZXR1cm4gSVNfRVJST1I7XG4gIH1cbn1cbmZ1bmN0aW9uIHRyeUNhbGxUd28oZm4sIGEsIGIpIHtcbiAgdHJ5IHtcbiAgICBmbihhLCBiKTtcbiAgfSBjYXRjaCAoZXgpIHtcbiAgICBMQVNUX0VSUk9SID0gZXg7XG4gICAgcmV0dXJuIElTX0VSUk9SO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUHJvbWlzZTtcblxuZnVuY3Rpb24gUHJvbWlzZShmbikge1xuICBpZiAodHlwZW9mIHRoaXMgIT09ICdvYmplY3QnKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJvbWlzZXMgbXVzdCBiZSBjb25zdHJ1Y3RlZCB2aWEgbmV3Jyk7XG4gIH1cbiAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Byb21pc2UgY29uc3RydWN0b3JcXCdzIGFyZ3VtZW50IGlzIG5vdCBhIGZ1bmN0aW9uJyk7XG4gIH1cbiAgdGhpcy5fVSA9IDA7XG4gIHRoaXMuX1YgPSAwO1xuICB0aGlzLl9XID0gbnVsbDtcbiAgdGhpcy5fWCA9IG51bGw7XG4gIGlmIChmbiA9PT0gbm9vcCkgcmV0dXJuO1xuICBkb1Jlc29sdmUoZm4sIHRoaXMpO1xufVxuUHJvbWlzZS5fWSA9IG51bGw7XG5Qcm9taXNlLl9aID0gbnVsbDtcblByb21pc2UuXzAgPSBub29wO1xuXG5Qcm9taXNlLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgaWYgKHRoaXMuY29uc3RydWN0b3IgIT09IFByb21pc2UpIHtcbiAgICByZXR1cm4gc2FmZVRoZW4odGhpcywgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpO1xuICB9XG4gIHZhciByZXMgPSBuZXcgUHJvbWlzZShub29wKTtcbiAgaGFuZGxlKHRoaXMsIG5ldyBIYW5kbGVyKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCByZXMpKTtcbiAgcmV0dXJuIHJlcztcbn07XG5cbmZ1bmN0aW9uIHNhZmVUaGVuKHNlbGYsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG4gIHJldHVybiBuZXcgc2VsZi5jb25zdHJ1Y3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIHJlcyA9IG5ldyBQcm9taXNlKG5vb3ApO1xuICAgIHJlcy50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgaGFuZGxlKHNlbGYsIG5ldyBIYW5kbGVyKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCByZXMpKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBoYW5kbGUoc2VsZiwgZGVmZXJyZWQpIHtcbiAgd2hpbGUgKHNlbGYuX1YgPT09IDMpIHtcbiAgICBzZWxmID0gc2VsZi5fVztcbiAgfVxuICBpZiAoUHJvbWlzZS5fWSkge1xuICAgIFByb21pc2UuX1koc2VsZik7XG4gIH1cbiAgaWYgKHNlbGYuX1YgPT09IDApIHtcbiAgICBpZiAoc2VsZi5fVSA9PT0gMCkge1xuICAgICAgc2VsZi5fVSA9IDE7XG4gICAgICBzZWxmLl9YID0gZGVmZXJyZWQ7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChzZWxmLl9VID09PSAxKSB7XG4gICAgICBzZWxmLl9VID0gMjtcbiAgICAgIHNlbGYuX1ggPSBbc2VsZi5fWCwgZGVmZXJyZWRdO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZWxmLl9YLnB1c2goZGVmZXJyZWQpO1xuICAgIHJldHVybjtcbiAgfVxuICBoYW5kbGVSZXNvbHZlZChzZWxmLCBkZWZlcnJlZCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVJlc29sdmVkKHNlbGYsIGRlZmVycmVkKSB7XG4gIGFzYXAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNiID0gc2VsZi5fViA9PT0gMSA/IGRlZmVycmVkLm9uRnVsZmlsbGVkIDogZGVmZXJyZWQub25SZWplY3RlZDtcbiAgICBpZiAoY2IgPT09IG51bGwpIHtcbiAgICAgIGlmIChzZWxmLl9WID09PSAxKSB7XG4gICAgICAgIHJlc29sdmUoZGVmZXJyZWQucHJvbWlzZSwgc2VsZi5fVyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWplY3QoZGVmZXJyZWQucHJvbWlzZSwgc2VsZi5fVyk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciByZXQgPSB0cnlDYWxsT25lKGNiLCBzZWxmLl9XKTtcbiAgICBpZiAocmV0ID09PSBJU19FUlJPUikge1xuICAgICAgcmVqZWN0KGRlZmVycmVkLnByb21pc2UsIExBU1RfRVJST1IpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNvbHZlKGRlZmVycmVkLnByb21pc2UsIHJldCk7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIHJlc29sdmUoc2VsZiwgbmV3VmFsdWUpIHtcbiAgLy8gUHJvbWlzZSBSZXNvbHV0aW9uIFByb2NlZHVyZTogaHR0cHM6Ly9naXRodWIuY29tL3Byb21pc2VzLWFwbHVzL3Byb21pc2VzLXNwZWMjdGhlLXByb21pc2UtcmVzb2x1dGlvbi1wcm9jZWR1cmVcbiAgaWYgKG5ld1ZhbHVlID09PSBzZWxmKSB7XG4gICAgcmV0dXJuIHJlamVjdChcbiAgICAgIHNlbGYsXG4gICAgICBuZXcgVHlwZUVycm9yKCdBIHByb21pc2UgY2Fubm90IGJlIHJlc29sdmVkIHdpdGggaXRzZWxmLicpXG4gICAgKTtcbiAgfVxuICBpZiAoXG4gICAgbmV3VmFsdWUgJiZcbiAgICAodHlwZW9mIG5ld1ZhbHVlID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgbmV3VmFsdWUgPT09ICdmdW5jdGlvbicpXG4gICkge1xuICAgIHZhciB0aGVuID0gZ2V0VGhlbihuZXdWYWx1ZSk7XG4gICAgaWYgKHRoZW4gPT09IElTX0VSUk9SKSB7XG4gICAgICByZXR1cm4gcmVqZWN0KHNlbGYsIExBU1RfRVJST1IpO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICB0aGVuID09PSBzZWxmLnRoZW4gJiZcbiAgICAgIG5ld1ZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZVxuICAgICkge1xuICAgICAgc2VsZi5fViA9IDM7XG4gICAgICBzZWxmLl9XID0gbmV3VmFsdWU7XG4gICAgICBmaW5hbGUoc2VsZik7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgZG9SZXNvbHZlKHRoZW4uYmluZChuZXdWYWx1ZSksIHNlbGYpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuICBzZWxmLl9WID0gMTtcbiAgc2VsZi5fVyA9IG5ld1ZhbHVlO1xuICBmaW5hbGUoc2VsZik7XG59XG5cbmZ1bmN0aW9uIHJlamVjdChzZWxmLCBuZXdWYWx1ZSkge1xuICBzZWxmLl9WID0gMjtcbiAgc2VsZi5fVyA9IG5ld1ZhbHVlO1xuICBpZiAoUHJvbWlzZS5fWikge1xuICAgIFByb21pc2UuX1ooc2VsZiwgbmV3VmFsdWUpO1xuICB9XG4gIGZpbmFsZShzZWxmKTtcbn1cbmZ1bmN0aW9uIGZpbmFsZShzZWxmKSB7XG4gIGlmIChzZWxmLl9VID09PSAxKSB7XG4gICAgaGFuZGxlKHNlbGYsIHNlbGYuX1gpO1xuICAgIHNlbGYuX1ggPSBudWxsO1xuICB9XG4gIGlmIChzZWxmLl9VID09PSAyKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLl9YLmxlbmd0aDsgaSsrKSB7XG4gICAgICBoYW5kbGUoc2VsZiwgc2VsZi5fWFtpXSk7XG4gICAgfVxuICAgIHNlbGYuX1ggPSBudWxsO1xuICB9XG59XG5cbmZ1bmN0aW9uIEhhbmRsZXIob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHByb21pc2Upe1xuICB0aGlzLm9uRnVsZmlsbGVkID0gdHlwZW9mIG9uRnVsZmlsbGVkID09PSAnZnVuY3Rpb24nID8gb25GdWxmaWxsZWQgOiBudWxsO1xuICB0aGlzLm9uUmVqZWN0ZWQgPSB0eXBlb2Ygb25SZWplY3RlZCA9PT0gJ2Z1bmN0aW9uJyA/IG9uUmVqZWN0ZWQgOiBudWxsO1xuICB0aGlzLnByb21pc2UgPSBwcm9taXNlO1xufVxuXG4vKipcbiAqIFRha2UgYSBwb3RlbnRpYWxseSBtaXNiZWhhdmluZyByZXNvbHZlciBmdW5jdGlvbiBhbmQgbWFrZSBzdXJlXG4gKiBvbkZ1bGZpbGxlZCBhbmQgb25SZWplY3RlZCBhcmUgb25seSBjYWxsZWQgb25jZS5cbiAqXG4gKiBNYWtlcyBubyBndWFyYW50ZWVzIGFib3V0IGFzeW5jaHJvbnkuXG4gKi9cbmZ1bmN0aW9uIGRvUmVzb2x2ZShmbiwgcHJvbWlzZSkge1xuICB2YXIgZG9uZSA9IGZhbHNlO1xuICB2YXIgcmVzID0gdHJ5Q2FsbFR3byhmbiwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKGRvbmUpIHJldHVybjtcbiAgICBkb25lID0gdHJ1ZTtcbiAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIGlmIChkb25lKSByZXR1cm47XG4gICAgZG9uZSA9IHRydWU7XG4gICAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gIH0pO1xuICBpZiAoIWRvbmUgJiYgcmVzID09PSBJU19FUlJPUikge1xuICAgIGRvbmUgPSB0cnVlO1xuICAgIHJlamVjdChwcm9taXNlLCBMQVNUX0VSUk9SKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFJQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxVQUFELENBQWxCOztBQUVBLFNBQVNDLElBQVQsR0FBZ0IsQ0FBRTs7QUFtQmxCLElBQUlDLFVBQVUsR0FBRyxJQUFqQjtBQUNBLElBQUlDLFFBQVEsR0FBRyxFQUFmOztBQUNBLFNBQVNDLE9BQVQsQ0FBaUJDLEdBQWpCLEVBQXNCO0VBQ3BCLElBQUk7SUFDRixPQUFPQSxHQUFHLENBQUNDLElBQVg7RUFDRCxDQUZELENBRUUsT0FBT0MsRUFBUCxFQUFXO0lBQ1hMLFVBQVUsR0FBR0ssRUFBYjtJQUNBLE9BQU9KLFFBQVA7RUFDRDtBQUNGOztBQUVELFNBQVNLLFVBQVQsQ0FBb0JDLEVBQXBCLEVBQXdCQyxDQUF4QixFQUEyQjtFQUN6QixJQUFJO0lBQ0YsT0FBT0QsRUFBRSxDQUFDQyxDQUFELENBQVQ7RUFDRCxDQUZELENBRUUsT0FBT0gsRUFBUCxFQUFXO0lBQ1hMLFVBQVUsR0FBR0ssRUFBYjtJQUNBLE9BQU9KLFFBQVA7RUFDRDtBQUNGOztBQUNELFNBQVNRLFVBQVQsQ0FBb0JGLEVBQXBCLEVBQXdCQyxDQUF4QixFQUEyQkUsQ0FBM0IsRUFBOEI7RUFDNUIsSUFBSTtJQUNGSCxFQUFFLENBQUNDLENBQUQsRUFBSUUsQ0FBSixDQUFGO0VBQ0QsQ0FGRCxDQUVFLE9BQU9MLEVBQVAsRUFBVztJQUNYTCxVQUFVLEdBQUdLLEVBQWI7SUFDQSxPQUFPSixRQUFQO0VBQ0Q7QUFDRjs7QUFFRFUsTUFBTSxDQUFDQyxPQUFQLEdBQWlCQyxPQUFqQjs7QUFFQSxTQUFTQSxPQUFULENBQWlCTixFQUFqQixFQUFxQjtFQUNuQixJQUFJLE9BQU8sSUFBUCxLQUFnQixR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