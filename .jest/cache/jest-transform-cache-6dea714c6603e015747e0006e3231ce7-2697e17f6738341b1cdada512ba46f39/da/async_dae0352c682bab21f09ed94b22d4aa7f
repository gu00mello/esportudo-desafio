86c878f3c64b41b2cbedef6fd4d31231
var defer = require('./defer.js');

module.exports = async;

function async(callback) {
  var isAsync = false;
  defer(function () {
    isAsync = true;
  });
  return function async_callback(err, result) {
    if (isAsync) {
      callback(err, result);
    } else {
      defer(function nextTick_callback() {
        callback(err, result);
      });
    }
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkZWZlciIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwiYXN5bmMiLCJjYWxsYmFjayIsImlzQXN5bmMiLCJhc3luY19jYWxsYmFjayIsImVyciIsInJlc3VsdCIsIm5leHRUaWNrX2NhbGxiYWNrIl0sInNvdXJjZXMiOlsiYXN5bmMuanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGRlZmVyID0gcmVxdWlyZSgnLi9kZWZlci5qcycpO1xuXG4vLyBBUElcbm1vZHVsZS5leHBvcnRzID0gYXN5bmM7XG5cbi8qKlxuICogUnVucyBwcm92aWRlZCBjYWxsYmFjayBhc3luY2hyb25vdXNseVxuICogZXZlbiBpZiBjYWxsYmFjayBpdHNlbGYgaXMgbm90XG4gKlxuICogQHBhcmFtICAge2Z1bmN0aW9ufSBjYWxsYmFjayAtIGNhbGxiYWNrIHRvIGludm9rZVxuICogQHJldHVybnMge2Z1bmN0aW9ufSAtIGF1Z21lbnRlZCBjYWxsYmFja1xuICovXG5mdW5jdGlvbiBhc3luYyhjYWxsYmFjaylcbntcbiAgdmFyIGlzQXN5bmMgPSBmYWxzZTtcblxuICAvLyBjaGVjayBpZiBhc3luYyBoYXBwZW5lZFxuICBkZWZlcihmdW5jdGlvbigpIHsgaXNBc3luYyA9IHRydWU7IH0pO1xuXG4gIHJldHVybiBmdW5jdGlvbiBhc3luY19jYWxsYmFjayhlcnIsIHJlc3VsdClcbiAge1xuICAgIGlmIChpc0FzeW5jKVxuICAgIHtcbiAgICAgIGNhbGxiYWNrKGVyciwgcmVzdWx0KTtcbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgIGRlZmVyKGZ1bmN0aW9uIG5leHRUaWNrX2NhbGxiYWNrKClcbiAgICAgIHtcbiAgICAgICAgY2FsbGJhY2soZXJyLCByZXN1bHQpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxZQUFELENBQW5COztBQUdBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJDLEtBQWpCOztBQVNBLFNBQVNBLEtBQVQsQ0FBZUMsUUFBZixFQUNBO0VBQ0UsSUFBSUMsT0FBTyxHQUFHLEtBQWQ7RUFHQU4sS0FBSyxDQUFDLFlBQVc7SUFBRU0sT0FBTyxHQUFHLElBQVY7RUFBaUIsQ0FBL0IsQ0FBTDtFQUVBLE9BQU8sU0FBU0MsY0FBVCxDQUF3QkMsR0FBeEIsRUFBNkJDLE1BQTdCLEVBQ1A7SUFDRSxJQUFJSCxPQUFKLEVBQ0E7TUFDRUQsUUFBUSxDQUFDRyxHQUFELEVBQU1DLE1BQU4sQ0FBUjtJQUNELENBSEQsTUFLQTtNQUNFVCxLQUFLLENBQUMsU0FBU1UsaUJBQVQsR0FDTjtRQUNFTCxRQUFRLENBQUNHLEdBQUQsRUFBTUMsTUFBTixDQUFSO01BQ0QsQ0FISSxDQUFMO0lBSUQ7RUFDRixDQWJEO0FBY0QifQ==